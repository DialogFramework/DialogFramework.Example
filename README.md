# DialogFramework Example
## Описание
Данный проект - пример реализации чат-бота по работе с базой данных на естественном языке. Чат-бот отвечает на вопросы, заданные на естественном языке, и работает по принципу вопрос-ответ.

Проект относится к области обработки естественного языка (Natural Language Processing, NLP) и использует алгоритмы "понимания" естественного языка (Natural Language Understanding, NLU). Взаимодействие с пользователем реализовано в виде диалогового пользовательского интерфейса (Conversational User Interfaces, CUI).

## База данных
База данных содержит две сущности (Entity): сотрудник (Person) и  отдел (Department). Данные хранятся в двух JSON файлах:
- Data/PersonData.json
- Data/DepartmentData.json

### Данные о сотрудниках   
| Поле | Описание |
|---|---|
|id|Уникальный идентификатор|
|surname|Фамилия|
|name|Имя|
|patronymic|Отчество|
|gender|Пол (м или ж)|
|departmentId|Идентификатор отдела|
|office|Номер комнаты|
|phone|Номер телефона|
|email|Почта|
### Данные об отделе
| Поле | Описание |
|---|---|
|id|Уникальный идентификатор|
|name|Наименование отдела|
|headOfDepartmentId|Руководитель отдела|

## Функции чат-бота
Пользователь формирует запрос на естественном языке и отправляет его чат-боту. Встроенный парсер (Parser) использует разработанную семантическую грамматику (Semantic Grammars) и семантические шаблоны запросов (Templates, Patterns), чтобы выделить из запроса намерение пользователя (Intent) и сущности, которые содержатся в намерении (Entities).

Например:

*Пользователь:* Какой телефон у Ивановой?

**Намерение**: Получить телефон сотрудника

**Сущность**: Иванова (Class Person)

### Реализованные намерения (Intents):
- Получить всю информацию о сотруднике по фамилии и/или и/или имени и/или отчеству
- Получить телефон сотрудника
- Получить номер комнаты сотрудника
- Получить почту сотрудника
- Получить отдел сотрудника
- Получить сотрудников, работающих в отделе
- Получить список комнат отдела
- Получить телефоны сотрудников отдела
- Получить список сотрудников, работающих в комнате
- Получить сотрудника по телефону
- Получить количество человек, которые работают в комнате
- Получить количество человек, которые работают в отделе
- Получить список отделов, которые находятся в комнате
- Получить список телефонов работающих в комнате сотрудников
### Обработка намерений пользователя
После того как парсер выделил самое вероятное намерение, менеджер диалогов (Dialog Manager) вызывает соответствующее действие (Action). Действия реализованы в виде отдельных JavaScript файлов. Обычно, действие принимает на вход намерение и сущности намерения и генерирует текстовый ответ пользователю.

## Как запустить пример
### Подключение морфологического словаря
Для работы примера необходим морфологический словарь открытого проекта OpenCorpora:
- Скачайте архив http://opencorpora.org/files/export/dict/dict.opcorpora.xml.zip.
- Разархивируйте скачанный архив.
- В файле **DialogConsole/config.json**, в разделе **dictionaryfiles** укажить путь на разархивированный файл **dict.opcorpora.xml**.
### Запуск приложения
Морфологический словарь индексируется и загружается в память, поэтому запущенное приложение занимает около 3,75Гб ОЗУ.

Соберите и запустите приложение. При старте консольного приложения будет происходить загрузка морфологического словаря, семантических грамматик и сущностей. После загрузки всех данных появится приглашение для ввода данных. 

**dc>_**

Введите свой запрос на естественном языке. Чат-бот вернет ответ, помеченный меткой **bot:**.

### Данные тестового примера
**Сотрудники**

|id|surname|name|patronymic|gender|departmentId|office|phone|email|
|---|---|---|---|---|---|---|---|---|
|1|Иванов|Сидор|Петрович|м|1|956|2346705|Сидор.Иванов@организация.ру|
|2|Иванова|Екатерина|Степановна|ж|2|001|98765432|Екатерина.Иванова@организация.ру|

**Отделы**

|id|name|headOfDepartmentId|
|---|---|---|
|1|Главное управление|1|
|2|Секретариат|2|

## Как загрузить в пример свои данные
Если вы хотите загрузить в пример свои данные о сотрудниках и отделах, то вам необходимо:

1. Заполнить файл Data/PersonData.json своими данными о сотрудниках.
2. Заполнить файл Data/DepartmentData.json своими данными об отделах.
3. Заполнить файл Data/dict.user.xml данными о формах фамилий сотрудников в различных падежах (в формате OpenCorpora).

